"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[221],{3315:function(e,t,s){s.r(t),s.d(t,{default:function(){return z}});var o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"home"}},[t("NavBar",{staticClass:"home-nav"},[t("div",{attrs:{slot:"center"},slot:"center"},[e._v("购物街")])]),t("TabControl",{directives:[{name:"show",rawName:"v-show",value:e.isTabFixed,expression:"isTabFixed"}],ref:"tabControl1",staticClass:"tab-control",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),t("ScrollRouter",{ref:"scroll",staticClass:"content",attrs:{"probe-type":3,"pull-up-load":!0},on:{scroll:e.contentScroll,pullingUp:e.loadMore}},[t("HomeSwiper",{attrs:{banners:e.banners},on:{swiperImageLoad:e.swiperImageLoad}}),t("HomeRecommmendView",{attrs:{recommends:e.recommends}}),t("HomeFeatureView"),t("TabControl",{ref:"tabControl2",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),t("GoodsList",{attrs:{list:e.showGoods}})],1),t("BackTop",{directives:[{name:"show",rawName:"v-show",value:e.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(t){return e.backClick.apply(null,arguments)}}})],1)},r=[],a=(s(7658),s(5957)),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-control"},e._l(e.titles,(function(s,o){return t("div",{key:s,staticClass:"tab-control-item"},[t("span",{class:{active:o===e.currentIndex},on:{click:function(t){return e.itemClick(o)}}},[e._v(" "+e._s(s)+" ")])])})),0)},n=[],l={name:"TabControl",data(){return{currentIndex:0}},methods:{itemClick(e){this.currentIndex=e,this.$emit("tabClick",e)}},props:{titles:{type:Array,default:()=>[]}}},c=l,m=s(1001),d=(0,m.Z)(c,i,n,!1,null,"0f1fe332",null),u=d.exports,p=s(1966),h=s(4780),f=s(7707);const b=()=>(0,f.W)({url:"/home/multidata"}),g=(e,t)=>(0,f.W)({url:"/home/data",params:{type:e,page:t}});var v=s(5566),w=s(8301),k=function(){var e=this,t=e._self._c;return t("SwiperRouter",e._l(e.banners,(function(s){return t("SwiperItem",{key:s.acm},[t("a",{attrs:{href:s.link}},[t("img",{attrs:{src:s.image,alt:""},on:{load:e.imageLoad}})])])})),1)},C=[],T=s(832),_={name:"HomeSwiper",props:{banners:{type:Array,default:()=>[]}},components:{SwiperRouter:T.D,SwiperItem:T.t},data(){return{isLoad:!1}},methods:{imageLoad(){this.isLoad||(this.$emit("swiperImageLoad"),this.isLoad=!0)}}},x=_,y=(0,m.Z)(x,k,C,!1,null,null,null),H=y.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"recommend"},e._l(e.recommends,(function(s){return t("div",{key:s.acm,staticClass:"recommend-item"},[t("a",{attrs:{href:s.link}},[t("img",{attrs:{src:s.image,alt:""}}),t("div",[e._v(e._s(s.title))])])])})),0)},I=[],L={name:"HomeRecommmendView",props:{recommends:{type:Array,default:()=>[]}}},$=L,G=(0,m.Z)($,S,I,!1,null,"63a89f30",null),R=G.exports,Z=function(){var e=this;e._self._c;return e._m(0)},F=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"feature"},[t("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[t("img",{attrs:{src:s(8775),alt:""}})])])}],B={name:"HomeFeatureView"},V=B,M=(0,m.Z)(V,Z,F,!1,null,"1fd6deab",null),N=M.exports,Y={name:"HomeRouter",components:{NavBar:a.Z,TabControl:u,GoodsList:p.Z,ScrollRouter:h.Z,HomeSwiper:H,HomeRecommmendView:R,HomeFeatureView:N},mixins:[v.x,v.s],data(){return{banners:[],recommends:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",taboffsetTop:0,isTabFixed:!1,saveY:0}},methods:{tabClick(e){switch(e){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}this.$refs.tabControl1.currentIndex=e,this.$refs.tabControl2.currentIndex=e},contentScroll(e){this.isShowBackTop=-e.y>w.v9,this.isTabFixed=-e.y>this.taboffsetTop},loadMore(){this.getHomeGoods(this.currentType)},swiperImageLoad(){this.taboffsetTop=this.$refs.tabControl2.$el.offsetTop},getHomeMultidata(){b().then((e=>{this.banners=e.data.banner.list,this.recommends=e.data.recommend.list}))},getHomeGoods(e){const t=this.goods[e].page+1;g(e,t).then((t=>{this.goods[e].list.push(...t.data.list),this.goods[e].page++,this.$refs.scroll.finishPullUp()}))}},created(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},computed:{showGoods(){return this.goods[this.currentType].list}},activated(){this.$refs.scroll.scrollTo(0,this.saveY,0),this.$refs.scroll.refresh()},deactivated(){this.saveY=this.$refs.scroll.scrollY,this.$bus.$off("itemImageLoad",this.itemImgListener)}},A=Y,j=(0,m.Z)(A,o,r,!1,null,"6a7416c1",null),z=j.exports},8775:function(e,t,s){e.exports=s.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=221.5fe3b826.js.map